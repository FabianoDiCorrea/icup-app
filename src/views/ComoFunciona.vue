<template>
  <div class="container mt-4 mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h2 class="text-primary fw-bold mb-0">Manual do Treinador</h2>
        <span class="text-muted small">Guia detalhado de funcionalidades</span>
      </div>
      <BButton variant="outline-secondary" @click="$router.push('/')">Voltar</BButton>
    </div>

    <BCard no-body class="shadow-sm border-0 overflow-hidden">
      <BRow class="g-0">
        <BCol md="3" class="bg-dark border-end">
          <div class="nav flex-column nav-pills p-3" role="tablist" aria-orientation="vertical">
            <button 
              class="nav-link text-start mb-1" 
              :class="{ active: abaAtiva === 'intro' }" 
              @click="abaAtiva = 'intro'"
            >
              ğŸ IntroduÃ§Ã£o
            </button>
            <button 
              class="nav-link text-start mb-1" 
              :class="{ active: abaAtiva === 'clubes' }" 
              @click="abaAtiva = 'clubes'"
            >
              ğŸ›¡ï¸ GestÃ£o de Clubes
            </button>
            <button 
              class="nav-link text-start mb-1" 
              :class="{ active: abaAtiva === 'tecnicos' }" 
              @click="abaAtiva = 'tecnicos'"
            >
              ğŸ‘” GestÃ£o de TÃ©cnicos
            </button>
            <button 
              class="nav-link text-start mb-1" 
              :class="{ active: abaAtiva === 'campeonatos' }" 
              @click="abaAtiva = 'campeonatos'"
            >
              ğŸ† Campeonatos
            </button>
            <button 
              class="nav-link text-start mb-1" 
              :class="{ active: abaAtiva === 'partidas' }" 
              @click="abaAtiva = 'partidas'"
            >
              âš½ Operando a Partida
            </button>
            <div class="border-top border-secondary my-2"></div>
            <button 
              class="nav-link text-start mb-1" 
              :class="{ active: abaAtiva === 'dados' }" 
              @click="abaAtiva = 'dados'"
            >
              ğŸ’¾ Backup e SeguranÃ§a
            </button>
          </div>
        </BCol>

        <BCol md="9" class="bg-dark">
          <div class="p-4" style="min-height: 500px;">
            
            <div v-if="abaAtiva === 'intro'" class="fade-in">
              <h4 class="text-primary mb-3">Bem-vindo ao Sistema</h4>
              <p>
                Este sistema foi desenhado para ser um gerenciador de campeonatos <strong>agnÃ³stico</strong>. 
                Isso significa que ele nÃ£o impÃµe regras rÃ­gidas de futebol profissional (como 11 jogadores ou 3 substituiÃ§Ãµes), 
                permitindo que vocÃª gerencie desde peladas de fim de semana, campeonatos de futsal, atÃ© ligas de videogame.
              </p>
              <BAlert show variant="info" class="mt-4">
                <h6 class="alert-heading fw-bold">âš ï¸ Importante: Modo Offline</h6>
                <p class="mb-0 small">
                  Todos os dados ficam salvos no <strong>seu navegador</strong>. Se vocÃª limpar o cache ou formatar o PC, os dados somem. 
                  Use a aba <strong>ConfiguraÃ§Ãµes</strong> frequentemente para baixar um backup dos seus dados.
                </p>
              </BAlert>
            </div>

            <div v-if="abaAtiva === 'clubes'" class="fade-in">
              <h4 class="text-primary mb-3">GestÃ£o de Clubes</h4>
              
              <h6 class="fw-bold mt-4">1. Cadastro FlexÃ­vel</h6>
              <p class="text-muted small">
                Ao criar um time, vocÃª nÃ£o precisa preencher 11 titulares. VocÃª pode cadastrar apenas 5 (futsal) ou atÃ© 22 jogadores.
                O sistema aceita times com qualquer nÃºmero de atletas.
              </p>

              <h6 class="fw-bold mt-4">2. Uniformes e Arte da Camisa</h6>
              <p class="text-muted small">
                Na ediÃ§Ã£o do time, vocÃª pode criar "CombinaÃ§Ãµes de Cores" (Kits).
                <br>
                AlÃ©m disso, no campo <strong>URL da Camisa</strong>, vocÃª pode colar o link de uma imagem (.png) da camisa do time. 
                Essa imagem aparecerÃ¡ na visualizaÃ§Ã£o de "FormaÃ§Ã£o" antes das partidas.
              </p>

              <h6 class="fw-bold mt-4">3. Siglas</h6>
              <p class="text-muted small">
                Defina uma sigla de 3 letras (ex: FLA, VAS, PAL). Ela serÃ¡ usada na visualizaÃ§Ã£o mobile para economizar espaÃ§o na tabela de jogos.
              </p>
            </div>

            <div v-if="abaAtiva === 'campeonatos'" class="fade-in">
              <h4 class="text-primary mb-3">Formatos de Campeonato</h4>
              
              <div class="d-flex gap-3 mb-4">
                <div class="border rounded p-3 bg-dark w-100">
                  <strong>Pontos Corridos</strong>
                  <p class="small text-muted mb-0">Tabela tradicional. Todos contra todos (Turno ou Turno/Returno).</p>
                </div>
                <div class="border rounded p-3 bg-dark w-100">
                  <strong>Liga + Mata-Mata</strong>
                  <p class="small text-muted mb-0">Fase de grupos seguida de eliminatÃ³rias (estilo Copa do Mundo ou Champions).</p>
                </div>
                <div class="border rounded p-3 bg-dark w-100">
                  <strong>Mata-Mata Puro</strong>
                  <p class="small text-muted mb-0">EliminatÃ³rias diretas desde o inÃ­cio. Perdeu, saiu.</p>
                </div>
              </div>

              <h6 class="fw-bold">Funcionalidades Extras</h6>
              <ul class="list-group list-group-flush small bg-transparent">
                <li class="list-group-item bg-transparent text-white border-secondary ps-0">
                  <strong>ğŸ“„ Clonar Campeonato:</strong> Na lista de campeonatos, use o botÃ£o "Clonar" para criar uma cÃ³pia idÃªntica de um torneio existente (Ãºtil para criar a "2Âª EdiÃ§Ã£o" mantendo os mesmos times).
                </li>
                <li class="list-group-item bg-transparent text-white border-secondary ps-0">
                  <strong>ğŸŒ Exibir PaÃ­s:</strong> Nas configuraÃ§Ãµes do campeonato, vocÃª pode escolher se deseja exibir ou ocultar a bandeira do paÃ­s do time na tabela.
                </li>
                <li class="list-group-item bg-transparent text-white border-secondary ps-0">
                  <strong>âœï¸ Editar/Configurar:</strong> Use o botÃ£o "Configurar" na lista para alterar regras, nome ou times participantes mesmo apÃ³s o campeonato ter iniciado.
                </li>
              </ul>

              <h6 class="fw-bold mt-3">AvanÃ§ando Fases (Mata-Mata)</h6>
              <p class="text-muted small">
                Quando todos os jogos da fase forem concluÃ­dos, o botÃ£o <strong>"Encerrar Fase"</strong> serÃ¡ liberado.
                Se a partida terminar empatada no tempo normal, a aba de <strong>PÃªnaltis</strong> ficarÃ¡ disponÃ­vel para preenchimento.
               Caso os pÃªnaltis nÃ£o sejam informados, o sistema abrirÃ¡ um menu para que vocÃª escolha manualmente quem avanÃ§a.
              </p>
            </div>

            <div v-if="abaAtiva === 'partidas'" class="fade-in">
              <h4 class="text-primary mb-3">Operando a Partida</h4>
              <p>A tela de SÃºmula Ã© o coraÃ§Ã£o do sistema. Funcionalidades disponÃ­veis:</p>

              <ul class="list-group list-group-flush small">
                <li class="list-group-item">
                  <strong>â±ï¸ CronÃ´metro:</strong> Um relÃ³gio simples para acompanhar o tempo de jogo. VocÃª pode pausar e reiniciar.
                </li>
                <li class="list-group-item">
                  <strong>ğŸ¤– SimulaÃ§Ã£o:</strong> Se nÃ£o quiser jogar, pode usar o botÃ£o de "Simular Resultado" para gerar um placar aleatÃ³rio baseado na forÃ§a dos times.
                </li>
                <li class="list-group-item">
                  <strong>ğŸŸ¦ CartÃ£o Azul:</strong> OpÃ§Ã£o de configurar expulsÃ£o temporÃ¡ria (se habilitado nas regras).
                </li>
                <li class="list-group-item">
                  <strong>ğŸ¥… PÃªnaltis:</strong> Em jogos de mata-mata que terminam empatados, uma aba extra de "PÃªnaltis" aparece para definir o vencedor.
                </li>
              </ul>

              <h6 class="fw-bold mt-4">Na PrÃ¡tica</h6>
              <p class="text-muted small">
                <strong>EscalaÃ§Ã£o:</strong> Marque quem comeÃ§ou jogando.
                <br>
                <strong>SubstituiÃ§Ãµes:</strong> Selecione quem sai (deve estar em campo) e quem entra (deve estar no banco).
              </p>
            </div>

            <div v-if="abaAtiva === 'dados'" class="fade-in">
              <h4 class="text-primary mb-3">Backup e SeguranÃ§a</h4>
              
              <h6 class="fw-bold">Exportar</h6>
              <p class="text-muted small">
                Gera um arquivo <code>.json</code> com tudo. FaÃ§a isso sempre que terminar uma rodada importante.
              </p>

              <h6 class="fw-bold">Importar (Mesclar vs Substituir)</h6>
              <p class="text-muted small">
                Ao importar, vocÃª tem duas opÃ§Ãµes:
                <br>
                <strong>Mesclar:</strong> Adiciona os dados do arquivo ao que vocÃª jÃ¡ tem (Ãºtil para juntar times criados em PCs diferentes).
                <br>
                <strong>Substituir:</strong> Apaga tudo o que existe agora e coloca o backup no lugar.
              </p>
            </div>

            <div v-if="abaAtiva === 'tecnicos'" class="fade-in">
              <h4 class="text-primary mb-3">GestÃ£o de TÃ©cnicos</h4>
              <p>O sistema permite que vocÃª crie o perfil de treinadores e vincule aos times nos campeonatos.</p>

              <div class="alert alert-warning border-warning bg-opacity-10 text-warning p-3">
                <strong>âš ï¸ Ordem Importante:</strong> Cadastre os tÃ©cnicos <strong>ANTES</strong> de criar os campeonatos.
              </div>

              <h6 class="fw-bold mt-4">Vinculando ao Time</h6>
              <p class="text-muted small">
                Na tela de <strong>Detalhes do Campeonato</strong>, clique no botÃ£o de configuraÃ§Ãµes âš™ï¸ (engrenagem) para editar os participantes.
                LÃ¡ vocÃª pode selecionar quem serÃ¡ o tÃ©cnico de cada equipe naquela competiÃ§Ã£o.
              </p>

              <h6 class="fw-bold mt-4">Dashboard do TÃ©cnico</h6>
              <p class="text-muted small">
                Ao clicar no nome de um tÃ©cnico em qualquer lugar do sistema, vocÃª abre o <strong>Dashboard de Carreira</strong>.
                LÃ¡ vocÃª vÃª todo o histÃ³rico dele: tÃ­tulos, jogos, aproveitamento e atÃ© contra quem ele mais perdeu.
              </p>
            </div>

            <div v-if="abaAtiva === 'historico'" class="fade-in">
              <h4 class="text-primary mb-3">HistÃ³rico e Sala de TrofÃ©us</h4>
              
              <h6 class="fw-bold mt-4">HistÃ³rico Geral ğŸ†</h6>
              <p class="text-muted small">
                Uma linha do tempo com todos os campeÃµes de todas as ediÃ§Ãµes que vocÃª jÃ¡ jogou.
                O sistema agrupa campeonatos com o mesmo nome (ex: "Copa do Brasil") e numera as ediÃ§Ãµes automaticamente (1Âª, 2Âª, 3Âª...).
              </p>

              <h6 class="fw-bold mt-4">Sala de TrofÃ©us do Clube</h6>
              <p class="text-muted small">
                Na tela de detalhes de um clube, clique no botÃ£o <strong>ğŸ† Sala de TrofÃ©us</strong>.
                VocÃª verÃ¡ uma galeria com todas as taÃ§as que aquele time levantou, com data e detalhes da campanha.
              </p>
            </div>

          </div>
        </BCol>
      </BRow>
    </BCard>
  </div>
</template>

<script>
import { BCard, BButton, BRow, BCol, BAlert } from 'bootstrap-vue-next';

export default {
  name: 'ComoFunciona',
  components: {
    BCard, BButton, BRow, BCol, BAlert
  },
  data() {
    return {
      abaAtiva: 'intro'
    }
  }
}
</script>

<style scoped>
.nav-pills .nav-link {
  color: #4b5563;
  border-radius: 0;
  border-left: 4px solid transparent;
  transition: all 0.2s;
}

.nav-pills .nav-link.active {
  /* background-color: #f3f4f6; */
  color: var(--bs-primary);
  border-left-color: var(--bs-primary);
  font-weight: bold;
}

.fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>